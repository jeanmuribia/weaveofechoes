<form>
  <div class="sheet-container">
    <header class="sheet-header">
      <h1>{{actorName}}</h1>
    </header>

    <!-- Tabs -->
    <nav class="sheet-tabs tabs" data-group="primary-tabs">
      <a class="item" data-tab="profile">Profile</a>
      <a class="item" data-tab="relationships">Relationships</a>
      <a class="item" data-tab="biography">Biography</a>
      <a class="item" data-tab="private-notes">Private Notes</a>
    </nav>

    <!-- Tab contents -->
    <div class="tab-content">
      
<div class="tab active" data-tab="profile">
 <section class="identity-section">
  <h2 class="section-header">Identity</h2>
  
  <div class="basic-info">
   <div class="info-field">
  <label class="info-label">Name:</label>
  <span id="actor-name" class="clickable">{{actorName}}</span>
  <input id="name-edit" type="text" class="hidden" />
</div>
     <div class="info-field">
  <label class="info-label">Element:</label>
  <span id="element-view" class="clickable">
    {{capitalize system.element.value}}
    <i class="element-icon {{system.element.value}}"></i>
  </span>
  <select id="element-edit" class="hidden">
    <option value="fire">Fire</option>
    <option value="water">Water</option>
    <option value="earth">Earth</option>
    <option value="air">Air</option>
  </select>
</div>

  </div>

  <div class="resources">
 <div class="resource stamina">
  <label class="resource-label">Stamina</label>
  <div class="stamina-display">
    <span id="current-stamina" class="resource-value">{{system.stamina.current}}</span>
   <div class="stamina-controls">
  <button id="stamina-minus" class="resource-btn">-</button>
  <button id="stamina-plus" class="resource-btn">+</button>
</div>
  </div>
  <div class="stamina-max-container">
    <span id="stamina-max-container" class="clickable">
      Max: <span id="stamina-max">{{system.stamina.max}}</span>
    </span>
    <input id="stamina-max-edit" type="number" class="hidden" min="1" />
  </div>
</div>

  <div class="resource focus">
  <label class="resource-label">Focus</label>
  <span id="focus-value" class="resource-value">{{system.focusPoints.current}}</span>
  <div class="resource-controls">
    <button id="focus-minus" class="resource-btn">-</button>
    <button id="focus-plus" class="resource-btn">+</button>
  </div>
  <div class="resource-visibility">
    <input id="focus-toggle" type="checkbox" {{#if system.focusPoints.isVisible}}checked{{/if}} />
    <label for="focus-toggle">Show</label>
  </div>
</div>

<div class="resource synergy">
  <div class="resource-label">Synergy</div>
  <div class="resource-value {{#if isNotInGroup}}not-in-group{{/if}}">
    {{#if isNotInGroup}}
      Not in a group yet
    {{else}}
      {{currentSynergy}}
    {{/if}}
  </div>
  {{#unless isNotInGroup}}
    <div class="resource-controls">
      <div>Base: {{maxSynergy}}</div>
    </div>
  {{/unless}}
</div>

  </div>

  <div class="profile-image">
    <img src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
  </div>
</section>
</div>
<div class="section-container">

<div class="tempers-attributes-container">
  <!-- Tempers Section -->
    <div class="tempers-maneuver-wrapper">
<section class="tempers-section">
  <h2>Tempers</h2>
  <div class="tempers-container">
    {{#each system.tempers}}
    <div class="temper-card" data-value="{{this.currentValue}}" data-injury="{{this.injury}}">
      <div class="temper-header">
        <h3 class="temper-title">{{@key}}</h3>
        <button class="edit-button" data-temper="{{@key}}" title="Edit">
          <i class="fas fa-pencil-alt"></i>
        </button>
      </div>
      <span class="temper-value">{{this.currentValue}}</span>
      <label class="trauma-label">
        <input type="checkbox" id="{{@key}}-trauma" {{checked this.injury}} /> Trauma
      </label>
    </div>
    {{/each}}
  </div>
</section>

<div class="maneuver-section">
      <div class="maneuver-container">
       <h2>Maneuver</h2> 
      </div>
    </div>
</div>

<section class="attributes-section">
  <h2>Attributes</h2>
  <div class="attributes-container">
{{#each (sort (objectToArray system.attributes) 'order') as |attribute|}}
<div class="attribute-card-wrapper">
  <div class="attribute-card" data-value="{{attribute.currentValue}}" data-injury="{{attribute.injuries.injury1}}">
    <div class="attribute-header">
      <h3 class="attribute-title">{{capitalize attribute.key}}</h3>
      <button class="edit-button" title="Edit">
        <i class="fa-solid fa-pencil"></i>
      </button>
    </div>
    <div class="attribute-value">{{attribute.currentValue}}</div>
    <label class="wounded-label">
      <input type="checkbox" {{checked attribute.wounded}} /> Wounded
    </label>
  </div>
  <div class="attribute-injuries">
    <label><input type="checkbox" {{checked attribute.injuries.injury1}} /> Injury 1</label>
    <label><input type="checkbox" {{checked attribute.injuries.injury2}} /> Injury 2</label>
    <label><input type="checkbox" {{checked attribute.injuries.injury3}} /> Injury 3</label>
  </div>
</div>
{{/each}}
  </div>
</section>
</div>
  


  </div>


</div> <!-- End of Profile Tab -->

<!-- Relationships Tab -->
<div class="tab" data-tab="relationships">
  <h2>Relationships</h2>
  
  <!-- Synergy Section -->
  <div class="character-synergy-container {{#if isSynergyHidden}}hidden-by-gm{{/if}}">
    <h3>Group Synergy</h3>
    <div class="character-group-members">
      {{#each groupMembers}}
        {{#unless this.isCurrentActor}}
          <div class="character-member-item {{#if ../isSynergyHidden}}disabled{{else}}{{#if this.isSelected}}selected{{/if}}{{/if}}" data-character="{{this.name}}">
            <span class="character-member-name">{{this.name}}</span>
          </div>
        {{/unless}}
      {{/each}}
    </div>
    <div class="character-synergy-circle">
      <div>
        <h4>Group Synergy</h4>
        <div class="character-synergy-values">
          {{#if isSynergyHidden}}
            <span>Hidden by GM</span>
          {{else}}
            <span>{{currentSynergy}}/{{maxSynergy}}</span>
          {{/if}}
        </div>
      </div>
      <div>
        <h4>Synergic Maneuver Cost</h4>
        <div class="character-synergy-values {{#if isSynergyHidden}}hidden-cost{{else}}{{#if maneuverCost}}has-cost{{else}}no-cost{{/if}}{{/if}}">
          {{#if isSynergyHidden}}
            <span>Hidden by GM</span>
          {{else}}
            {{#if maneuverCost}}
              <span>{{maneuverCost}}</span>
            {{else}}
              <span>Select at least one mate</span>
            {{/if}}
          {{/if}}
        </div>
      </div>
    </div>
  </div>
  
  <div class="tab-content"></div>
  <!-- Existing Relationships Section -->
  <h3>Existing Relationships</h3>
  <div id="relationship-list">
    <!-- Relationships will be dynamically populated here -->
  </div>

  <!-- Button to Add a New Relationship -->
  <button id="add-relationship">Add Relationship</button>

  <!-- Form to Add or Edit a Relationship -->
  <div id="relationship-form" style="display: none;">
    <!-- Player Name -->
    <label for="player-name">Player:</label>
    <div id="player-view" class="view-mode">Click to edit Player Name</div>
    <input type="text" id="player-edit" class="edit-mode" style="display:none;" />

    <!-- Character Name (Dropdown) -->
    <label for="character-name">Character:</label>
    <div id="character-view" class="view-mode">Choose another character</div>
    <select id="character-edit" class="edit-mode" style="display:none;">
      <option value="" disabled selected>Choose another character</option>
      {{#each ../actors}}
        <option value="{{this.id}}">{{this.name}}</option>
      {{/each}}
    </select>

    <!-- Relationship Level (Radio Buttons) -->
    <label for="relationship-level">Relation:</label>
    <div id="relationship-level">
      {{#each relationshipLevels}}
        <label>
          <input type="radio" name="relationship" value="{{this.value}}" {{#if (eq this.value 0)}}checked{{/if}}>
          {{this.label}}
        </label>
      {{/each}}
    </div>
    
    <button id="save-relationship">Save Relationship</button>
  </div>
</div>

      <!-- Biography Tab -->
      <div class="tab" data-tab="biography">
        <h2>Biography</h2>
        <textarea id="biography" name="biography">{{system.biography}}</textarea>
      </div>

      <!-- Private Notes Tab -->
      <div class="tab" data-tab="private-notes">
        <h2>Private Notes</h2>
        <textarea id="private-notes" name="private-notes">{{system.privateNotes}}</textarea>
      </div>

    </div>
    
</form>